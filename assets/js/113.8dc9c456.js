(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{423:function(e,a,s){"use strict";s.r(a);var t=s(10),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("最近在学习计算机图形学，需要配置C++环境和opencv来编译作业代码，于是我就开始折腾下M1如何编译C++代码了。")]),e._v(" "),s("h2",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[e._v("#")]),e._v(" 安装依赖")]),e._v(" "),s("p",[e._v("首先你需要安装Mac下的包管理器 "),s("a",{attrs:{href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"}},[e._v("homebrew"),s("OutboundLink")],1),e._v("，官网有详细的安装教程，我就不赘述了。")]),e._v(" "),s("p",[e._v("接下来安装C++相关的依赖：")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("brew "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" gcc cmake\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("然后是图形学相关的依赖：")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("brew "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" eigen opencv\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h2",{attrs:{id:"配置头文件路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置头文件路径"}},[e._v("#")]),e._v(" 配置头文件路径")]),e._v(" "),s("blockquote",[s("p",[e._v("This script installs Homebrew to its preferred prefix (/usr/local for macOS Intel, /opt/homebrew for Apple Silicon and /home/linuxbrew/.linuxbrew for Linux) so that you don’t need sudo when you brew install.")])]),e._v(" "),s("p",[e._v("homebrew 官网有描述M1的安装路径更改到 "),s("code",[e._v("/opt/homebrew")]),e._v(" 了。所以我们需要指定头文件路径，这里我们指定到 "),s("code",[e._v("/opt/homebrew/include")]),e._v("。")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("CPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/opt/homebrew/include\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("LIBRARY_PATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/opt/homebrew/lib\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("把上述代码添加到 "),s("code",[e._v(".bashrc")]),e._v(" 文件，如果你使用的是 zsh 请添加到 "),s("code",[e._v(".zshrc")]),e._v(" 文件。")]),e._v(" "),s("h2",{attrs:{id:"检测头文件路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#检测头文件路径"}},[e._v("#")]),e._v(" 检测头文件路径")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("gcc -x c++ -v -E /dev/null \n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("如果输出结果有 "),s("code",[e._v("/opt/homebrew/include")]),e._v(" 就说明配置成功了。")]),e._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),s("p",[e._v("配置环境看似简单，但找到解决方案需要花不少时间，这里主要问题是M1下安装路径不同，所以我们需要指定头文件路径。")]),e._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://apple.stackexchange.com/questions/414622/installing-a-c-c-library-with-homebrew-on-m1-macs",target:"_blank",rel:"noopener noreferrer"}},[e._v("Installing a C/C++ library with homebrew on M1 Macs"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/371245964",target:"_blank",rel:"noopener noreferrer"}},[e._v("在 Mac OS 下配置 GAMES101 开发环境"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"https://stackoverflow.com/questions/19852199/view-default-include-path-of-c-headers-in-mac-os-x-by-gcc-v",target:"_blank",rel:"noopener noreferrer"}},[e._v("View default include path of C headers in Mac OS X by gcc -v?"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);