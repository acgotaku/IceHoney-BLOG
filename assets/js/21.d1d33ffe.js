(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{342:function(t,s,a){"use strict";a.r(s);var e=a(8),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("项目开发中经常会遇到 CI 自动拉取 Github 库的情况，我们个人使用的时候会手动输入账户密码信息，但是针对 CI 来说，我们一般会把敏感的认证信息放在环境变量里。所以针对认证信息的自动输入，需要做一些处理。")]),t._v(" "),a("h2",{attrs:{id:"环境变量自动替换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境变量自动替换"}},[t._v("#")]),t._v(" 环境变量自动替换")]),t._v(" "),a("p",[t._v("针对 Travis CI，我们一般把认证信息放在环境变量里，所以在执行 clone 其他 repo 的时候，可以先设置认证信息。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global url."),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${CI_USER_NAME}")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${CI_USER_TOKEN}")]),t._v('@github.com/"')]),t._v(".insteadOf "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/"')]),t._v("'\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("这样设置的话，会自动替换 git clone 的网址。")]),t._v(" "),a("h2",{attrs:{id:"url-里面写入认证信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-里面写入认证信息"}},[t._v("#")]),t._v(" URL 里面写入认证信息")]),t._v(" "),a("p",[t._v("有时候需要以另外一个身份进行 clone repo 的时候，会直接在 repo 的 URL 前面加上认证信息。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${USER_NAME}")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${USER_TOKEN}")]),t._v("@github.com/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("repo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("这样可以很方便的 clone 信息，但是认证信息会存在当前库的 git config 文件里，有泄漏的风险。")]),t._v(" "),a("h2",{attrs:{id:"netrc-设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#netrc-设置"}},[t._v("#")]),t._v(" netrc 设置")]),t._v(" "),a("p",[t._v("netr 文件用于存储网站的认证信息，一般位置在"),a("code",[t._v("~/.netrc")]),t._v("。格式是：")]),t._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("machine github.com\nlogin username\npassword xxxxxxx\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("总共有这么三种省略认证信息的方式，根据实际情况选择自己方便的一种认证方式即可。")]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://qiita.com/azusanakano/items/8dc1d7e384b00239d4d9",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub でユーザ名・パスワード省略"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);